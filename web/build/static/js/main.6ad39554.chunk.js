(this["webpackJsonpreact-web"]=this["webpackJsonpreact-web"]||[]).push([[0],{201:function(e,t,n){},202:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},215:function(e,t,n){},216:function(e,t,n){},217:function(e,t,n){},218:function(e,t,n){},219:function(e,t,n){},220:function(e,t,n){},221:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){},227:function(e,t,n){},228:function(e,t,n){},229:function(e,t,n){},230:function(e,t,n){},28:function(e,t,n){},31:function(e){e.exports=JSON.parse("{}")},365:function(e,t,n){},366:function(e,t,n){},367:function(e,t,n){},368:function(e,t,n){},369:function(e,t,n){},370:function(e,t,n){},371:function(e,t,n){},372:function(e,t,n){},373:function(e,t,n){"use strict";n.r(t);var s=n(0),c=n.n(s),a=n(63),i=n.n(a),r=(n(200),n(201),n(29)),o=n(21),l=n(382),u=function(){return sessionStorage.getItem("active")||!0},d=function(){return sessionStorage.getItem("CSRF")||null},h=function(){(new l.a).remove("jimiAuth"),sessionStorage.setItem("active",!1),sessionStorage.removeItem("CSRF")},b=function(e){sessionStorage.setItem("active",!0),sessionStorage.setItem("CSRF",e)},j=n(51),m=n(98),f=n(27),O=n(13),p=n(14),g=n(12),x=n(15),v=n(16),C=(n(31),function(){var e=window.location.hostname,t=window.location.port;return"localhost"===e&&"3000"===t?"http://127.0.0.1:5002/api/1.0/":"/api/1.0/"}),k=(n(28),n(202),n(1));function y(e){fetch(C()+"auth/logout/",{method:"GET",credentials:"include"}),h();var t=Object(o.g)();return setTimeout((function(){t.push("/login")}),2500),Object(k.jsxs)("div",{className:"fullscreen",children:[Object(k.jsx)("h1",{children:"jimi"}),Object(k.jsx)("div",{className:"outer",children:Object(k.jsx)("div",{className:"inner",children:Object(k.jsx)("h3",{children:"Successfully logged out"})})})]})}var N=function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(e){var s;return Object(O.a)(this,n),(s=t.call(this,e)).state={username:null,password:null,otpRequired:!1,otp:null,failedLogin:!1},s.submit=s.submit.bind(Object(g.a)(s)),s.change=s.change.bind(Object(g.a)(s)),s}return Object(p.a)(n,[{key:"submit",value:function(e){var t=this;if(e.preventDefault(),this.setState({failedLogin:!1}),this.state.otpRequired){var n={method:"POST",body:JSON.stringify({username:this.state.username,password:this.state.password,otp:this.state.otp})};fetch(C()+"auth/",n).then((function(e){if(e.ok)return e;throw e})).then((function(e){t.props.history.push("/index")})).catch((function(e){t.setState({otpRequired:!1}),t.setState({failedLogin:!0})}))}else{var s={method:"POST",body:JSON.stringify({username:this.state.username,password:this.state.password})};fetch(C()+"auth/",s).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){b(e.CSRF),t.props.history.push("/")})).catch((function(e){t.setState({otpRequired:!0})}))}}},{key:"change",value:function(e){var t=e.target,n=t.value,s=t.name;"checkbox"===t.type?t.checked?this.state.hobbies[n]=n:this.state.hobbies.splice(n,1):this.setState(Object(f.a)({},s,n))}},{key:"render",value:function(){return Object(k.jsxs)("div",{className:"fullscreen",children:[Object(k.jsx)("h1",{children:"jimi"}),Object(k.jsx)("div",{className:"outer",children:Object(k.jsx)("div",{className:"inner ".concat(this.state.failedLogin?"shake":""),children:Object(k.jsxs)("form",{onSubmit:this.submit,children:[Object(k.jsx)("h3",{children:"Login"}),this.state.failedLogin?Object(k.jsx)("p",{className:"failedLoginAlert",children:Object(k.jsx)("b",{children:"Login details appear to be invalid!"})}):Object(k.jsx)("p",{className:"failedLoginAlert",children:Object(k.jsx)("b",{children:"\xa0"})}),Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"text",name:"username",className:"form-control textbox",placeholder:"Username",autoComplete:"off",onChange:this.change})}),Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"password",name:"password",className:"form-control textbox",placeholder:"password",autoComplete:"off",onChange:this.change})}),this.state.otpRequired&&Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"text",name:"otp",className:"form-control textbox",placeholder:"One Time Password",autoComplete:"off",onChange:this.change})}),Object(k.jsx)("button",{type:"submit",className:"btn btn-primary btn-block button",children:"Login"})]})})})]})}}]),n}(s.Component);var S=function(e){var t=e.component,n=Object(m.a)(e,["component"]);return Object(k.jsx)(o.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return Object(k.jsx)(t,Object(j.a)({},e))}}))};var w=function(e){var t=e.component,n=Object(m.a)(e,["component"]);return function(e){var t=Object(o.g)();fetch(C()+"auth/poll/",{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){b(e.CSRF)})).catch((function(e){h(),t.push("/login")}))}(),Object(k.jsx)(o.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return u()?Object(k.jsx)(t,Object(j.a)({},e)):Object(k.jsx)(o.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},D=n(32);n(211);var T=function(e){var t=new Date(0);return t.setUTCSeconds(e.lastUpdateTime),Object(k.jsx)("div",{className:"conductItemContainer",children:Object(k.jsxs)("div",{className:"conductItem",children:[Object(k.jsxs)("div",{className:"conductLeft",children:[Object(k.jsx)("a",{className:"conductTitle",href:"/conduct/?conductID="+e.id,title:e.name,children:e.name}),Object(k.jsxs)("p",{className:"conductState",children:["State: ",e.state]})]}),Object(k.jsxs)("div",{className:"conductRight",children:[Object(k.jsxs)("p",{className:"conductLastEdit",children:["Last Edit: ",t.toLocaleString()]}),Object(k.jsx)("br",{}),Object(k.jsxs)("div",{className:"conductRightLinks",children:[Object(k.jsx)("a",{className:"conductDeleteLink",onClick:function(t){return e.deleteConductClickHandler(t,e.id,e.name)},children:"Delete"}),Object(k.jsx)("p",{className:"conductRightOptions",children:"/"}),Object(k.jsx)("a",{className:"conductEditLink",href:"/conductSettings/?conductID="+e.id+"&edit=True",children:"Edit"})]})]})]})})};n(212);function I(e){var t=Date.now()/1e3;return Object(k.jsx)("div",{className:"statusItemContainer",children:Object(k.jsx)("div",{onDoubleClick:function(){var t;t=e._id,fetch(C()+"trigger/"+t+"/whereUsed/",{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){for(var t in e.results)window.open("/conduct/?conductID="+e.results[t]._id,"_blank")}))},className:"statusItem ".concat(e.enabled?"statusItemEnabled":"statusItemDisabled"," ").concat(e.startCheck>0&&e.startCheck+e.maxDuration>t||e.lastCheck+2.5>t?"statusItemRunning":""," ").concat(e.enabled&&e.startCheck>0&&e.startCheck+e.maxDuration<t?"statusItemCrashed":""," "),title:e.name})})}var L=function(e){var t=e.triggers;if(0==e.showDisabled){for(var n=[],s=0;s<e.triggers.length;s++)e.triggers[s].enabled&&n.push(e.triggers[s]);t=n}if(e.showCluster){var c={};for(s=0;s<e.triggers.length;s++)c[e.triggers[s].systemID]||(c[e.triggers[s].systemID]=[]),c[e.triggers[s].systemID].push(e.triggers[s]);return Object.entries(c).map((function(e){var t=Object(D.a)(e,2),n=t[0],s=t[1];return Object(k.jsxs)("div",{className:"statusListContainer",children:[Object(k.jsxs)("h2",{children:["System ",n]},n),s.map((function(e){return Object(k.jsx)(I,{_id:e._id,name:e.name,enabled:e.enabled,startCheck:e.startCheck,lastCheck:e.lastCheck,maxDuration:0==e.maxDuration?60:e.maxDuration},e._id)}))]})}))}return Object(k.jsx)("div",{className:"statusListContainer",children:t.map((function(e){return Object(k.jsx)(I,{_id:e._id,name:e.name,enabled:e.enabled,startCheck:e.startCheck,lastCheck:e.lastCheck,maxDuration:0==e.maxDuration?60:e.maxDuration},e._id)}))})};n(213);var R=function(e){return Object(k.jsx)("span",{children:"Loading page..."})},E=(n(214),!1),U=!1;function P(){return fetch(C()+"models/trigger/all/",{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){return e.results}))}var F=function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(e){var s;return Object(O.a)(this,n),(s=t.call(this,e)).state={triggers:[],loading:!0},s.mounted=!0,s.updateTriggers=s.updateTriggers.bind(Object(g.a)(s)),P().then((function(e){s.setState({triggers:e,loading:!1}),s.updateTriggers()})),s}return Object(p.a)(n,[{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"updateTriggers",value:function(){var e=this;this.mounted&&setTimeout((function(){P().then((function(t){e.setState({triggers:t}),e.updateTriggers()}))}),500)}},{key:"toggleDisabled",value:function(){E=!E}},{key:"toggleCluster",value:function(){U=!U}},{key:"render",value:function(){return this.state.loading?Object(k.jsx)(R,{}):Object(k.jsxs)("div",{className:"pageContent1",children:[Object(k.jsx)("h1",{children:"Trigger Status"}),Object(k.jsx)("hr",{}),Object(k.jsx)("button",{className:"btn btn-primary btn-block button medium marSmall",onClick:this.toggleDisabled,children:"Toggle Disabled"}),Object(k.jsx)("br",{}),Object(k.jsx)("button",{className:"btn btn-primary btn-block button medium marSmall",onClick:this.toggleCluster,children:"Toggle Cluster"}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsx)("div",{className:"pageCenter-outer",children:Object(k.jsx)("div",{className:"pageCenter-inner",children:Object(k.jsx)(L,{triggers:this.state.triggers,showDisabled:E,showCluster:U})})})]})}}]),n}(s.Component),J=(n(215),function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(e){var s;Object(O.a)(this,n),(s=t.call(this,e)).state={username:null,name:null,password:"",password1:"",password2:"",updated:!1,updateFailed:!1,msg:"",loading:!0},s.change=s.change.bind(Object(g.a)(s)),s.submit=s.submit.bind(Object(g.a)(s));return fetch(C()+"auth/myAccount/",{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){s.setState({username:e.username,name:e.name,loading:!1})})),s}return Object(p.a)(n,[{key:"submit",value:function(e){var t=this;if(e.preventDefault(),this.state.password1!==this.state.password2)return this.setState({msg:"Passwords do not match"}),this.setState({updateFailed:!0}),void setTimeout((function(){t.setState({updateFailed:!1})}),1e3);var n={CSRF:d(),name:this.state.name};""!==this.state.password1&&(n.password=this.state.password,n.password1=this.state.password1);var s={method:"POST",credentials:"include",body:JSON.stringify(n)};fetch(C()+"auth/myAccount/",s).then((function(e){if(e.ok)return e;throw e})).then((function(e){t.setState({msg:"Saved"}),t.setState({updated:!0}),setTimeout((function(){t.setState({updated:!1})}),1e3)})).catch((function(e){t.setState({msg:"Error: Could not save data"}),t.setState({updateFailed:!0})}))}},{key:"change",value:function(e){this.setState({updateFailed:!1,msg:""});var t=e.target,n=t.value,s=t.name;"checkbox"===t.type?t.checked?this.state.hobbies[n]=n:this.state.hobbies.splice(n,1):this.setState(Object(f.a)({},s,n))}},{key:"render",value:function(){return this.state.loading?Object(k.jsx)(R,{}):Object(k.jsx)("div",{className:"pageContent2",children:Object(k.jsxs)("form",{onSubmit:this.submit,children:[Object(k.jsx)("h3",{children:"Your Details"}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsxs)("div",{className:"form-group",children:["General Details",Object(k.jsx)("hr",{})]}),Object(k.jsxs)("div",{className:"form-group",children:["Username:",Object(k.jsx)("br",{}),Object(k.jsx)("input",{type:"text",name:"username",className:"form-control textbox",autoComplete:"off",value:this.state.username,disabled:"true",onChange:this.change})]}),Object(k.jsxs)("div",{className:"form-group",children:["Name:",Object(k.jsx)("br",{}),Object(k.jsx)("input",{type:"text",name:"name",className:"form-control textbox",autoComplete:"off",value:this.state.name,onChange:this.change})]}),Object(k.jsx)("br",{}),Object(k.jsxs)("div",{className:"form-group",children:["Change Password",Object(k.jsx)("hr",{})]}),Object(k.jsxs)("div",{className:"form-group",children:["Current Password:",Object(k.jsx)("br",{}),Object(k.jsx)("input",{type:"password",name:"password",className:"form-control textbox",autoComplete:"off",onChange:this.change})]}),Object(k.jsxs)("div",{className:"form-group",children:["New Password:",Object(k.jsx)("br",{}),Object(k.jsx)("input",{type:"password",name:"password1",className:"form-control textbox ".concat("Passwords do not match"==this.state.msg?"alertErrorBorder":""),autoComplete:"off",onChange:this.change})]}),Object(k.jsxs)("div",{className:"form-group",children:["Confirm New Password:",Object(k.jsx)("br",{}),Object(k.jsx)("input",{type:"password",name:"password2",className:"form-control textbox ".concat("Passwords do not match"==this.state.msg?"alertErrorBorder":""),autoComplete:"off",onChange:this.change})]}),Object(k.jsx)("br",{}),Object(k.jsx)("button",{type:"submit",className:"btn btn-primary btn-block button small ".concat(this.state.updated?"saved":""," ").concat(this.state.updateFailed?"error":""),children:"Update"}),Object(k.jsx)("p",{className:"resultMessage ".concat(this.state.updateFailed?"alertError":"alert"," ").concat(this.state.updated||this.state.updateFailed?"":"hide"),children:Object(k.jsx)("b",{children:this.state.msg})})]})})}}]),n}(s.Component));n(216);var G=function(e){return Object(k.jsx)("div",{children:e.conducts.filter((function(t){return t.name.toLowerCase().includes(e.filter.toLowerCase())})).map((function(t){return Object(k.jsx)(T,{id:t._id,name:t.name,lastUpdateTime:t.lastUpdateTime,state:t.enabled?"Enabled":"Disabled",deleteConductClickHandler:e.deleteConductClickHandler},t._id)}))})},A=(n(217),function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(e){var s;Object(O.a)(this,n),(s=t.call(this,e)).state={conducts:[],filter:"",loading:!0};return fetch(C()+"conducts/",{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){s.setState({conducts:e.results,loading:!1})})),s.change=s.change.bind(Object(g.a)(s)),s.DeleteConduct=s.DeleteConduct.bind(Object(g.a)(s)),s.NewConduct=s.NewConduct.bind(Object(g.a)(s)),s}return Object(p.a)(n,[{key:"NewConduct",value:function(){this.props.history.push("/conductSettings/")}},{key:"DeleteConduct",value:function(e,t,n){var s=this;if(window.confirm("Please confirm removal of conduct named "+n)){var c={method:"DELETE",credentials:"include",body:JSON.stringify({CSRF:d()})};fetch(C()+"models/conduct/"+t+"/",c).then((function(e){throw e.ok&&s.setState({conducts:s.state.conducts.filter((function(e){return e._id!==t}))}),e})).catch((function(e){console.log("Could not delete conduct: "+t)}))}}},{key:"change",value:function(e){var t=e.target,n=t.value,s=t.name;"checkbox"===t.type?t.checked?this.state.hobbies[n]=n:this.state.hobbies.splice(n,1):this.setState(Object(f.a)({},s,n))}},{key:"render",value:function(){return this.state.loading?Object(k.jsx)(R,{}):Object(k.jsxs)("div",{className:"pageContent1",children:[Object(k.jsxs)("div",{children:[Object(k.jsx)("input",{type:"text",name:"filter",className:"form-control textbox conductSearch",placeholder:"Search Conducts",onChange:this.change}),Object(k.jsx)("button",{className:"btn btn-primary btn-block button conductNew",onClick:this.NewConduct,children:"+ Create New"})]}),Object(k.jsx)("br",{}),Object(k.jsx)("div",{children:Object(k.jsx)(G,{conducts:this.state.conducts,filter:this.state.filter,deleteConductClickHandler:this.DeleteConduct})})]})}}]),n}(s.Component)),_=(n(218),function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(e){var s;Object(O.a)(this,n),(s=t.call(this,e)).state={location:""};var c=e.location.search,a=new URLSearchParams(c).get("conductID");return/^[A-Za-z0-9]+$/.test(a)&&(s.state.location=a),s}return Object(p.a)(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"pageContent0",children:Object(k.jsx)("iframe",{className:"conductFrame",src:"/conductEditor/?conductID="+this.state.location})})}}]),n}(s.Component)),M=(n(219),function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(e){var s;Object(O.a)(this,n),(s=t.call(this,e)).state={type:"New",name:"",status:!1,comment:"",loading:!0,updateStatus:{id:null,msg:""}},s.change=s.change.bind(Object(g.a)(s)),s.submit=s.submit.bind(Object(g.a)(s));var c=e.location.search,a=new URLSearchParams(c).get("conductID");if("True"===new URLSearchParams(c).get("edit")){fetch(C()+"models/conduct/"+a+"/",{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){s.setState({name:e.name,status:e.status,comment:e.comment,type:"Update",loading:!1})}))}else s.state.loading=!1;return s}return Object(p.a)(n,[{key:"submit",value:function(e){var t=this;e.preventDefault();var n=this.props.location.search,s=new URLSearchParams(n).get("conductID"),c=new URLSearchParams(n).get("edit"),a={CSRF:d(),name:this.state.name,comment:this.state.comment,enabled:this.state.enabled};if("True"===c){var i={method:"POST",credentials:"include",body:JSON.stringify(a)};fetch(C()+"models/conduct/"+s+"/",i).then((function(e){if(e.ok)return e;throw e})).then((function(e){})).catch((function(e){}))}else{var r={method:"PUT",credentials:"include",body:JSON.stringify({CSRF:d()})};fetch(C()+"models/conduct/",r).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){r.method="POST",r.body=JSON.stringify(a);var n=e._id;fetch(C()+"models/conduct/"+n+"/",r).then((function(e){if(e.ok)return e;throw e})).then((function(e){t.props.history.push("?conductID="+n+"&edit=True"),window.location.reload(!1)})).catch((function(e){}))})).catch((function(e){}))}}},{key:"change",value:function(e){this.setState({updateFailed:!1,msg:""});var t=e.target,n=t.value,s=t.name;"checkbox"===t.type?t.checked?this.state.hobbies[n]=n:this.state.hobbies.splice(n,1):this.setState(Object(f.a)({},s,n))}},{key:"render",value:function(){return this.state.loading?Object(k.jsx)(R,{}):Object(k.jsx)("div",{className:"pageContent2",children:Object(k.jsxs)("form",{onSubmit:this.submit,children:[Object(k.jsx)("h3",{children:"Conduct Details"}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsxs)("div",{className:"form-group",children:["General Details",Object(k.jsx)("hr",{})]}),Object(k.jsxs)("div",{className:"form-group",children:["Name:",Object(k.jsx)("input",{type:"text",name:"name",className:"form-control textbox",autoComplete:"off",value:this.state.name,onChange:this.change})]}),Object(k.jsxs)("div",{className:"form-group",children:["Comment:",Object(k.jsx)("textarea",{type:"text",name:"comment",className:"form-control textarea",autoComplete:"off",value:this.state.comment,onChange:this.change})]}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsx)("button",{type:"submit",className:"btn btn-primary btn-block button small",children:this.state.type})]})})}}]),n}(s.Component));n(220);var H=function(e){return Object(k.jsx)("div",{className:"pluginItemContainer",children:Object(k.jsx)("a",{className:"pluginLink",href:"plugin/?pluginName="+e.name,children:Object(k.jsx)("div",{className:"pluginItem",children:Object(k.jsx)("span",{className:"pluginTitle",children:e.name})})})})};n(221);var K=function(e){return Object(k.jsx)("div",{children:e.plugins.filter((function(t){return t.name.toLowerCase().includes(e.filter.toLowerCase())})).map((function(e){return Object(k.jsx)(H,{name:e.name},e._id)}))})},q=(n(222),function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(e){var s;Object(O.a)(this,n),(s=t.call(this,e)).state={plugins:[],filter:"",loading:!0};return fetch(C()+"plugins/",{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){s.setState({plugins:e.results,loading:!1})})),s.change=s.change.bind(Object(g.a)(s)),s}return Object(p.a)(n,[{key:"change",value:function(e){var t=e.target,n=t.value,s=t.name;"checkbox"===t.type||this.setState(Object(f.a)({},s,n))}},{key:"render",value:function(){return this.state.loading?Object(k.jsx)(R,{}):Object(k.jsxs)("div",{className:"pageContent1",children:[Object(k.jsx)("div",{children:Object(k.jsx)("input",{type:"text",name:"filter",className:"form-control textbox pluginSearch",placeholder:"Search Plugins",onChange:this.change})}),Object(k.jsx)("br",{}),Object(k.jsx)("div",{className:"pageCenter-outer",children:Object(k.jsx)("div",{className:"pageCenter-inner",children:Object(k.jsx)(K,{plugins:this.state.plugins,filter:this.state.filter})})})]})}}]),n}(s.Component)),B=(n(223),function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(e){var s;Object(O.a)(this,n),(s=t.call(this,e)).state={location:""};var c=e.location.search,a=new URLSearchParams(c).get("pluginName");return/^[A-Za-z]+$/.test(a)&&(s.state.location=a),s}return Object(p.a)(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"pageContent0",children:Object(k.jsx)("iframe",{className:"pluginFrame",src:"/plugin/"+this.state.location+"/"})})}}]),n}(s.Component)),z=(n(224),function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(e){return Object(O.a)(this,n),t.call(this,e)}return Object(p.a)(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"pageContent0",children:Object(k.jsx)("iframe",{className:"modelEditorFrame",src:"model/"})})}}]),n}(s.Component)),W=(n(225),function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(e){return Object(O.a)(this,n),t.call(this,e)}return Object(p.a)(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"pageContent0",children:Object(k.jsx)("iframe",{className:"codifyFrame",src:"/codify/"})})}}]),n}(s.Component)),Y=n(383),Z=n(377),$=n(188),Q=n(189),V=n(80),X=n(191);n(226);var ee=function(e){var t=new Date(0),n=Date.now()/1e3;return t.setUTCSeconds(e.lastSyncTime),Object(k.jsx)("div",{className:"clusterItemContainer",children:Object(k.jsxs)("div",{className:"clusterItem",children:[Object(k.jsxs)("div",{className:"clusterLeft",children:[Object(k.jsxs)("p",{className:"clusterTitle",children:[e.systemID," - ",e.systemUID]}),Object(k.jsx)("br",{}),Object(k.jsxs)("p",{className:"clusterLeftItem",children:["Address: ",e.bindSecure?"https://":"http://",e.bindAddress,":",e.bindPort]}),Object(k.jsx)("br",{}),Object(k.jsxs)("p",{className:"clusterLeftItem",children:["Checksum: ",Object(k.jsx)("a",{href:"#",onClick:function(){var t;t=e.systemID,window.confirm("Are you sure you want to recalculate the checksum on system "+t+"?")&&fetch(C()+"system/checksum/"+t+"/",{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){alert(JSON.stringify(e))}))},children:e.checksum})]}),Object(k.jsx)("br",{}),Object(k.jsxs)("p",{className:"clusterLeftItem",children:["Status: ",e.lastSyncTime>n-120?"Online":"Offline"]})]}),Object(k.jsxs)("div",{className:"clusterRight",children:[Object(k.jsxs)("p",{className:"clusterRightItem",children:["Last Sync: ",t.toLocaleString()]}),Object(k.jsx)("br",{}),Object(k.jsxs)("p",{className:"clusterRightItem",children:["Sync Count: ",e.syncCount]}),Object(k.jsx)("br",{}),Object(k.jsxs)("p",{className:"clusterRightItem",children:["Master: ",e.master?"Yes":"No"]}),Object(k.jsx)("br",{}),Object(k.jsx)("p",{className:"clusterRightItem",children:Object(k.jsx)("a",{href:"#",onClick:function(){!function(e){var t=window.prompt("Updated system "+e+" from which system i.e. 0?");t&&fetch(C()+"system/update/"+e+"/"+t+"/",{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){alert(JSON.stringify(e))}))}(e.systemID)},children:"Update"})})]})]})})};n(227);var te=function(e){return Object(k.jsx)("div",{children:e.clusterMembers.map((function(e){return Object(k.jsx)(ee,{id:e._id,systemID:e.systemID,systemUID:e.systemUID,lastSyncTime:e.lastSyncTime,master:e.master,syncCount:e.syncCount,bindSecure:e.bindSecure,bindAddress:e.bindAddress,bindPort:e.bindPort,checksum:e.checksum},e._id)}))})};n(228);n(229);n(230);function ne(){return fetch(C()+"cluster/",{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){return e.results}))}function se(){return fetch(C()+"workers/stats/",{method:"GET",credentials:"include"}).then((function(e){return e.ok?e.json():[]})).then((function(e){return e.results}))}var ce=function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(e){var s;return Object(O.a)(this,n),(s=t.call(this,e)).state={clusterMembers:[],jobs:[],stats:[],loading:!0},s.mounted=!0,s.updateclusterMembers=s.updateClusterMembers.bind(Object(g.a)(s)),ne().then((function(e){s.setState({clusterMembers:e,loading:!1}),s.updateClusterMembers()})),s.updateJobs=s.updateJobs.bind(Object(g.a)(s)),se().then((function(e){s.setState({stats:e}),s.updateJobs()})),s.clearCache=s.clearCache.bind(Object(g.a)(s)),s.clearStartChecks=s.clearStartChecks.bind(Object(g.a)(s)),s.deleteDebugSessions=s.deleteDebugSessions.bind(Object(g.a)(s)),s.redistributeCluster=s.redistributeCluster.bind(Object(g.a)(s)),s.deleteUnusedObjects=s.deleteUnusedObjects.bind(Object(g.a)(s)),s}return Object(p.a)(n,[{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"updateJobs",value:function(){var e=this;this.mounted&&setTimeout((function(){se().then((function(t){e.setState({stats:t}),e.updateJobs()}))}),2500)}},{key:"updateClusterMembers",value:function(){var e=this;this.mounted&&setTimeout((function(){ne().then((function(t){e.setState({clusterMembers:t}),e.updateClusterMembers()}))}),15e3)}},{key:"clearCache",value:function(){fetch(C()+"clearCache/",{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){alert(JSON.stringify(e.results))}))}},{key:"clearStartChecks",value:function(){fetch(C()+"clearStartChecks/",{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){alert(JSON.stringify(e))}))}},{key:"deleteDebugSessions",value:function(){fetch(C()+"debug/clear/",{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){alert(JSON.stringify(e))}))}},{key:"redistributeCluster",value:function(){fetch(C()+"cluster/distribute/",{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){alert(JSON.stringify(e))}))}},{key:"deleteUnusedObjects",value:function(){this.props.history.push("/cleanup/")}},{key:"render",value:function(){return this.state.loading?Object(k.jsx)(R,{}):Object(k.jsxs)("div",{className:"pageContent1",children:[Object(k.jsx)("h1",{children:"Controls"}),Object(k.jsx)("hr",{}),Object(k.jsx)("button",{className:"btn btn-primary btn-block button medium marSmall",onClick:this.clearCache,children:"Clear Cache"}),Object(k.jsx)("button",{className:"btn btn-primary btn-block button medium marSmall",onClick:this.clearStartChecks,children:"Clear StartChecks"}),Object(k.jsx)("button",{className:"btn btn-primary btn-block button medium marSmall",onClick:this.deleteDebugSessions,children:"Delete Debug Sessions"}),Object(k.jsx)("button",{className:"btn btn-primary btn-block button medium marSmall",onClick:this.redistributeCluster,children:"Redistribute Cluster"}),Object(k.jsx)("button",{className:"btn btn-primary btn-block button medium marSmall",onClick:this.deleteUnusedObjects,children:"Delete Unused Objects"}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsx)("h1",{children:"Cluster Status"}),Object(k.jsx)("hr",{}),Object(k.jsx)(te,{clusterMembers:this.state.clusterMembers}),Object(k.jsx)("br",{}),Object(k.jsx)(Y.a,{width:"100%",height:400,children:Object(k.jsxs)(Z.a,{data:this.state.stats,margin:{top:5,right:30,left:20,bottom:5},children:[Object(k.jsx)($.a,{dataKey:"url"}),Object(k.jsx)(Q.a,{}),Object(k.jsx)(V.a,{}),Object(k.jsx)(X.a,{dataKey:"activeCount",fill:"#82ca9d"}),Object(k.jsx)(X.a,{dataKey:"queueLength",fill:"#8884d8"})]})})]})}}]),n}(s.Component),ae=(n(365),function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(e){return Object(O.a)(this,n),t.call(this,e)}return Object(p.a)(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"pageContent0",children:Object(k.jsx)("iframe",{className:"cleanupFrame",src:"/cleanup/"})})}}]),n}(s.Component));n(366);var ie=function(e){return Object(k.jsx)("div",{className:"marketplaceItemContainer",children:Object(k.jsx)("a",{className:"marketplaceLink",href:"#",onClick:function(){var t,n;t=e.name,n=e.githubRepo,window.confirm("Are you sure you want to install / update "+t+"?")&&fetch(C()+"plugins/store/install/?pluginName="+t+"&githubRepo="+n,{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){alert(JSON.stringify(e))}))},children:Object(k.jsxs)("div",{className:"marketplaceItem",children:[Object(k.jsx)("span",{className:"marketplaceTitle",children:e.name}),Object(k.jsx)("span",{className:"marketplaceInstalled",children:e.installed?"Installed":"Not Installed"})]})})})};n(367);var re=function(e){return Object(k.jsx)("div",{children:e.storePlugins.filter((function(t){return t.name.toLowerCase().includes(e.filter.toLowerCase())})).map((function(e){return Object(k.jsx)(ie,{name:e.name,installed:e.installed,githubRepo:e.githubRepo},e._id)}))})},oe=(n(368),function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(e){var s;Object(O.a)(this,n),(s=t.call(this,e)).state={storePlugins:[],filter:"",loading:!0};return fetch(C()+"plugins/store/list/",{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){s.setState({storePlugins:e.results,loading:!1})})),s.change=s.change.bind(Object(g.a)(s)),s}return Object(p.a)(n,[{key:"change",value:function(e){var t=e.target,n=t.value,s=t.name;"checkbox"===t.type||this.setState(Object(f.a)({},s,n))}},{key:"render",value:function(){return this.state.loading?Object(k.jsx)(R,{}):Object(k.jsxs)("div",{className:"pageContent1",children:[Object(k.jsx)("div",{children:Object(k.jsx)("input",{type:"text",name:"filter",className:"form-control textbox marketplaceSearch",placeholder:"Search Marketplace",onChange:this.change})}),Object(k.jsx)("br",{}),Object(k.jsx)("div",{className:"pageCenter-outer",children:Object(k.jsx)("div",{className:"pageCenter-inner",children:Object(k.jsx)(re,{storePlugins:this.state.storePlugins,filter:this.state.filter})})})]})}}]),n}(s.Component)),le=function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(e){var s;return Object(O.a)(this,n),(s=t.call(this,e)).getKeys=function(){return this.props.data.length>0?Object.keys(this.props.data[0]):[]},s.getHeader=function(){return this.getKeys().map((function(e,t){return Object(k.jsx)("th",{children:e.toUpperCase()},e)}))},s.getRowsData=function(){var e=this.props.data,t=this.getKeys();return e.map((function(e,n){return Object(k.jsx)("tr",{children:Object(k.jsx)(ue,{data:e,keys:t},n)},n)}))},s.getHeader=s.getHeader.bind(Object(g.a)(s)),s.getRowsData=s.getRowsData.bind(Object(g.a)(s)),s.getKeys=s.getKeys.bind(Object(g.a)(s)),s}return Object(p.a)(n,[{key:"render",value:function(){return Object(k.jsx)("div",{children:Object(k.jsxs)("table",{children:[Object(k.jsx)("thead",{children:Object(k.jsx)("tr",{children:this.getHeader()})}),Object(k.jsx)("tbody",{children:this.getRowsData()})]})})}}]),n}(c.a.Component),ue=function(e){return e.keys.map((function(t,n){return Object(k.jsx)("td",{children:e.data[t]},e.data[t])}))},de=(n(369),function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(e){var s;Object(O.a)(this,n),(s=t.call(this,e)).changeFile=function(e){s.setState({file:e.target.files[0]})},s.state={files:[],file:null,filename:null,loading:!0};return fetch(C()+"storage/file/",{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){s.setState({files:e.results,loading:!1})})),s.change=s.change.bind(Object(g.a)(s)),s.upload=s.upload.bind(Object(g.a)(s)),s}return Object(p.a)(n,[{key:"upload",value:function(){var e=new FormData;e.append("file",this.state.file),e.append("CSRF",d());var t={method:"PUT",credentials:"include",body:e};fetch(C()+"storage/file/"+this.state.filename+"/",t).then((function(e){if(e.ok)return e.json()})).then((function(e){alert(JSON.stringify(e))}))}},{key:"change",value:function(e){var t=e.target,n=t.value,s=t.name;"checkbox"===t.type?t.checked?this.state.hobbies[n]=n:this.state.hobbies.splice(n,1):this.setState(Object(f.a)({},s,n))}},{key:"render",value:function(){return this.state.loading?Object(k.jsx)(R,{}):Object(k.jsxs)("div",{className:"pageContent1",children:[Object(k.jsxs)("div",{children:[Object(k.jsx)("input",{type:"text",name:"filename",className:"form-control textbox fileUploadFilename",placeholder:"filename",onChange:this.change}),Object(k.jsx)("br",{}),Object(k.jsx)("input",{type:"file",name:"file",className:"form-control textbox fileUploadFile",onChange:this.changeFile}),Object(k.jsx)("br",{}),Object(k.jsx)("button",{className:"btn btn-primary btn-block button fileUpload",onClick:this.upload,children:"Upload"})]}),Object(k.jsx)("br",{}),"Existing Files:",Object(k.jsx)("div",{children:Object(k.jsx)(le,{data:this.state.files})})]})}}]),n}(s.Component));n(370);var he=function(e){return Object(k.jsxs)(r.a,{children:[Object(k.jsxs)("div",{class:"container",id:"topbar",children:[Object(k.jsx)(r.b,{exact:!0,className:"home",activeClassName:"homeActive",to:"/",children:"jimi"}),Object(k.jsx)(r.b,{exact:!0,className:"link",activeClassName:"active",to:"/status",children:"Status"}),Object(k.jsx)(r.b,{exact:!0,className:"link",activeClassName:"active",to:"/conducts",children:"Conducts"}),Object(k.jsx)(r.b,{exact:!0,className:"link",activeClassName:"active",to:"/plugins",children:"Plugins"}),Object(k.jsx)(r.b,{exact:!0,className:"link",activeClassName:"active",to:"/codify",children:"Codify"}),Object(k.jsx)(r.b,{exact:!0,className:"link",activeClassName:"active",to:"/modelEditor",children:"Model Editor"}),Object(k.jsxs)("div",{class:"container",id:"topbar-right",children:[u?Object(k.jsx)(r.b,{exact:!0,className:"link linkRight",activeClassName:"active",to:"/logout",children:"Logout"}):null,u?Object(k.jsx)(r.b,{exact:!0,className:"link linkRight",activeClassName:"active",to:"/myAccount",children:"My Account"}):null,u?Object(k.jsx)(r.b,{exact:!0,className:"link linkRight",activeClassName:"active",to:"/administration",children:"Administration"}):null]})]}),Object(k.jsxs)(o.d,{children:[Object(k.jsx)(S,{path:"/login",component:N}),Object(k.jsx)(w,{path:"/logout",component:y}),Object(k.jsx)(w,{path:"/status",component:F}),Object(k.jsx)(w,{path:"/conducts",component:A}),Object(k.jsx)(w,{path:"/conduct",component:_}),Object(k.jsx)(w,{path:"/files",component:de}),Object(k.jsx)(w,{path:"/conductSettings",component:M}),Object(k.jsx)(w,{path:"/plugins",component:q}),Object(k.jsx)(w,{path:"/plugin",component:B}),Object(k.jsx)(w,{path:"/codify",component:W}),Object(k.jsx)(w,{path:"/modelEditor",component:z}),Object(k.jsx)(w,{path:"/myAccount",component:J}),Object(k.jsx)(w,{path:"/administration",component:ce}),Object(k.jsx)(w,{path:"/marketplace",component:oe}),Object(k.jsx)(w,{path:"/cleanup",component:ae}),Object(k.jsx)(w,{path:"/",component:F})]})]})};n(371);n(372);var be=function(){return Object(k.jsx)("div",{id:"pageContent-wrapper",children:Object(k.jsx)(he,{})})};i.a.render(Object(k.jsx)(be,{}),document.getElementById("root"))}},[[373,1,2]]]);
//# sourceMappingURL=main.6ad39554.chunk.js.map